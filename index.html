
<!DOCTYPE html> 
<html>
    <head>
        <meta charset="utf-16i">
        <script>

                //things to do when loaded

            window.onload=function() {

                //Initalization

                var buildMode = false
                var nowBuildingID = 0
                var tick = 0
                var buildRotation = 0

                const Grid = document.getElementById('grid')
                const BasicHouseButton = document.getElementById('basic-house-button')
                const GrassButton = document.getElementById('grass-button')
                const StraightRoadButton = document.getElementById('road-straight-button')
                const CurvedRoadButton = document.getElementById('road-curved-button')
    
                const buildModeCheck = (event) => {
                    if (nowBuildingID === 0) {
                        document.getElementById(event.srcElement.id).style = 'opacity:1;'
                    }
                    if (nowBuildingID === 1) {
                        document.getElementById(event.srcElement.id).style = 'opacity:1;'
                    }
                    if (nowBuildingID === 2) {
                        document.getElementById(event.srcElement.id).style = 'opacity:1;'
                        document.getElementById(event.srcElement.id).classList.appendChild('road')
                    }
                    if (nowBuildingID === 3) {
                        document.getElementById(event.srcElement.id).style = 'opacity:1;'
                        document.getElementById(event.srcElement.id).classList.appendChild('road')
                    }
                    if (nowBuildingID === 4) {
                        document.getElementById(event.srcElement.id).style = 'opacity:1;'
                    }
                }

                const buildModeTry = () => {
                    if (nowBuildingID === 0) {
                        document.getElementById(event.srcElement.id).src = './images/green.gif'
                        document.getElementById(event.srcElement.id).style = `opacity:0.4; rotation: ${buildRotation}deg`
                    }
                    if (nowBuildingID === 1) {
                        document.getElementById(event.srcElement.id).src = './images/basic-house.png'
                        document.getElementById(event.srcElement.id).style = `opacity:0.4; rotation: ${buildRotation}deg`
                    }
                    if (nowBuildingID === 2) {
                        document.getElementById(event.srcElement.id).src = './images/road-straight.png'
                        document.getElementById(event.srcElement.id).style = `opacity:0.4; rotation: ${buildRotation}deg`
                    }
                    if (nowBuildingID === 3) {
                        document.getElementById(event.srcElement.id).src = './images/road-curved.png'
                        document.getElementById(event.srcElement.id).style = `opacity:0.4; rotation: ${buildRotation}deg`
                    }
                    if (nowBuildingID === 4) {
                        document.getElementById(event.srcElement.id).src = './images/default.gif'
                        document.getElementById(event.srcElement.id).style = `opacity:0.4; rotation: ${buildRotation}deg`
                    }
                }

                //1.Configuring

                for (let i = 0; i < 2499; i++) {
                    const newGridItem = document.createElement('img')
                    newGridItem.classList.add('item')
                    newGridItem.src = './images/default.gif'
                    newGridItem.id = `slot${i}`
                    Grid.appendChild(newGridItem)
                    const newGridTrySlot = document.createElement('img')
                    newGridTrySlot.classList.add('tryslot')
                    newGridTrySlot.src = './images/default.gif'
                    newGridTrySlot.id = `try${i}`
                    Grid.appendChild(newGridTrySlot)
                    newGridItem.addEventListener('click', buildModeCheck)
                    newGridTrySlot.addEventListener('mouseover', buildModeTry)
                }

                BasicHouseButton.addEventListener('click', function() {nowBuildingID = 1})
                GrassButton.addEventListener('click', function() {nowBuildingID = 0})
                CurvedRoadButton.addEventListener('click', function() {nowBuildingID = 3})
                StraightRoadButton.addEventListener('click', function() {nowBuildingID = 2})

                function mainloop() {
                    tick = tick + 1
                }



                setInterval(mainloop, 40)


            } 
        </script>
        <style>
            img {
                width: 64px;
                height: 64px;
                align-self: center;
            }

            img.buildingChanger {
                margin-left: auto;
                margin-right: auto;
            }

            div.building-list {
                position: fixed;
                top: 0;
                right: 0;
                height: 100%;
                width: 300px;
                background-color: rgba(210, 105, 30, 0.538);
            }

            .item {
                border-width: 0px;
                height: 64px;
                width: 64px;
                -webkit-user-drag: none;
                user-select: none;
                -moz-user-select: none;
                -webkit-user-select: none;
                -ms-user-select: none;
            }

            .grid-container {
                display: grid;
                gap: 2px;
                grid-template-columns: repeat(50, 64px );
                background-color: azure;
                margin: 0px;
            }

            body {
                background-color: rgb(178, 178, 178);
                width: fit-content;
                height: fit-content;
                margin: 0px;
            }

        </style>
    </head>
    <body>
        <div class="grid-container" id="grid">
            <div class="item"><img src="./images/default.gif"></div>
        </div>
        <div class="building-list">
            <div>
                <img id="basic-house-button" src="./images/basic-house.png" class="buildingChanger">
                <p style="font-family: 'Courier New', Courier, monospace; text-align: center; font-size:20px">Basic House</p>
            </div>
            <div>
                <img id="grass-button" src="./images/green.gif" class="buildingChanger">
                <p style="font-family: 'Courier New', Courier, monospace; text-align: center; font-size:20px">Grass</p>
            </div>
            <div>
                <img id="road-straight-button" src="./images/road-straight.png" class="buildingChanger">
                <p style="font-family: 'Courier New', Courier, monospace; text-align: center; font-size:20px">Road</p>
            </div>
            <div>
                <img id="road-curved-button" src="./images/road-curved.png" class="buildingChanger">
                <p style="font-family: 'Courier New', Courier, monospace; text-align: center; font-size:20px">Curved road</p>
            </div>
        </div>
    </body>
</html>
